<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Scanner Cheat</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #1a2332 0%, #2d3e50 100%); min-height: 100vh; color: white; }
        .header { background: rgba(26, 35, 50, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding: 20px 40px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3); }
        .logo-dropdown { position: relative; }
        .logo-button { display: flex; align-items: center; gap: 15px; cursor: pointer; padding: 10px 20px; border-radius: 12px; transition: all 0.3s; background: transparent; border: none; }
        .logo-button:hover { background: rgba(255, 255, 255, 0.05); }
        .logo-icon { width: 50px; height: 50px; }
        .logo-text h2 { font-size: 18px; font-weight: 700; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .logo-text p { font-size: 12px; color: rgba(255, 255, 255, 0.6); }
        .dropdown-menu { position: absolute; top: 80px; left: 0; background: rgba(26, 35, 50, 0.98); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 10px; min-width: 250px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5); opacity: 0; visibility: hidden; transform: translateY(-10px); transition: all 0.3s; z-index: 1000; }
        .dropdown-menu.active { opacity: 1; visibility: visible; transform: translateY(0); }
        .dropdown-item { display: flex; align-items: center; gap: 12px; padding: 14px 18px; color: white; text-decoration: none; border-radius: 8px; transition: all 0.3s; font-size: 14px; font-weight: 500; }
        .dropdown-item:hover { background: rgba(102, 126, 234, 0.2); }
        .dropdown-item.danger { color: #f56565; }
        .dropdown-item.danger:hover { background: rgba(245, 101, 101, 0.1); }
        .dropdown-divider { height: 1px; background: rgba(255, 255, 255, 0.1); margin: 8px 0; }
        .user-info { display: flex; align-items: center; gap: 15px; }
        .user-avatar { width: 45px; height: 45px; border-radius: 50%; background: linear-gradient(135deg, #fbbf24, #f59e0b); display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: 600; }
        .user-details h3 { font-size: 16px; font-weight: 600; }
        .user-details p { font-size: 12px; color: #fbbf24; }
        .container { max-width: 1400px; margin: 40px auto; padding: 0 40px; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 40px; }
        .stat-card { background: rgba(26, 35, 50, 0.95); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 25px; box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2); transition: all 0.3s; }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3); }
        .stat-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .stat-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .stat-icon.blue { background: linear-gradient(135deg, #667eea, #764ba2); }
        .stat-icon.green { background: linear-gradient(135deg, #48bb78, #2f855a); }
        .stat-icon.red { background: linear-gradient(135deg, #f56565, #c53030); }
        .stat-icon.yellow { background: linear-gradient(135deg, #ecc94b, #d69e2e); }
        .stat-value { font-size: 32px; font-weight: 700; margin-bottom: 5px; }
        .stat-label { color: rgba(255, 255, 255, 0.7); font-size: 14px; font-weight: 500; }
        .content-card { background: rgba(26, 35, 50, 0.95); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2); overflow: hidden; }
        .card-header { padding: 25px 30px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); display: flex; justify-content: space-between; align-items: center; }
        .card-title { font-size: 20px; font-weight: 700; }
        .tabs { display: flex; gap: 10px; }
        .tab { padding: 10px 20px; background: rgba(255, 255, 255, 0.05); border-radius: 8px; border: none; color: rgba(255, 255, 255, 0.7); font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .tab.active { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
        .search-box { padding: 10px 18px; border: 2px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.05); border-radius: 10px; font-size: 14px; width: 300px; transition: all 0.3s; color: white; }
        .search-box:focus { outline: none; border-color: #667eea; background: rgba(255, 255, 255, 0.1); }
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        thead { background: rgba(255, 255, 255, 0.02); }
        th { padding: 18px 25px; text-align: left; font-weight: 600; font-size: 13px; color: rgba(255, 255, 255, 0.7); text-transform: uppercase; letter-spacing: 0.5px; }
        td { padding: 18px 25px; border-bottom: 1px solid rgba(255, 255, 255, 0.05); font-size: 14px; }
        tr:hover { background: rgba(255, 255, 255, 0.02); }
        .badge { padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
        .badge-success { background: rgba(72, 187, 120, 0.2); color: #48bb78; }
        .badge-danger { background: rgba(245, 101, 101, 0.2); color: #f56565; }
        .btn { padding: 8px 16px; font-size: 13px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-danger { background: linear-gradient(135deg, #f56565, #c53030); color: white; }
        .btn-danger:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(245, 101, 101, 0.4); }
        .btn-success { background: linear-gradient(135deg, #48bb78, #2f855a); color: white; }
        .btn-success:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(72, 187, 120, 0.4); }
        .loading { text-align: center; padding: 60px; color: rgba(255, 255, 255, 0.7); }
        .spinner { border: 3px solid rgba(255, 255, 255, 0.1); border-top: 3px solid #667eea; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 15px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: #2d1b4e; padding: 30px; border-radius: 16px; max-width: 500px; width: 90%; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); border: 2px solid #7c3aed; }
        .modal-title { font-size: 22px; font-weight: 700; margin-bottom: 20px; color: #fbbf24; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; }
        .form-control { width: 100%; padding: 12px 16px; border: 2px solid rgba(255, 255, 255, 0.1); background: rgba(255, 255, 255, 0.05); border-radius: 10px; font-size: 14px; transition: all 0.3s; color: white; }
        .form-control:focus { outline: none; border-color: #667eea; background: rgba(255, 255, 255, 0.1); }
        .modal-actions { display: flex; gap: 12px; justify-content: flex-end; margin-top: 25px; }
        #users-tab { display: block; }
        #banned-tab { display: none; }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-dropdown">
            <button class="logo-button" onclick="toggleDropdown()">
                <svg class="logo-icon" viewBox="0 0 500 500">
                    <polygon points="250,50 420,150 420,350 250,450 80,350 80,150" fill="#00D4FF" stroke="#00A8CC" stroke-width="4"/>
                    <polygon points="250,90 390,170 390,330 250,410 110,330 110,170" fill="#FF3B3B" stroke="#CC0000" stroke-width="3"/>
                    <polygon points="250,120 370,185 370,315 250,380 130,315 130,185" fill="#00D4FF"/>
                    <text x="250" y="260" text-anchor="middle" font-family="Arial Black" font-size="80" font-weight="900" fill="#FF3B3B" stroke="#000" stroke-width="3">SC</text>
                </svg>
                <div class="logo-text"><h2>SCANNER CHEAT</h2><p>Admin Panel</p></div>
            </button>
            <div class="dropdown-menu" id="dropdownMenu">
                <a href="/dashboard" class="dropdown-item"><span>ðŸ‘¤</span><span>Dashboard</span></a>
                <a href="/panel" class="dropdown-item"><span>ðŸ‘‘</span><span>Admin Panel</span></a>
                <div class="dropdown-divider"></div>
                <a href="/logout" class="dropdown-item danger"><span>ðŸšª</span><span>Logout</span></a>
            </div>
        </div>
        <div class="user-info">
            <div class="user-avatar">ðŸ‘‘</div>
            <div class="user-details"><h3>{{ user.username }}</h3><p>Owner</p></div>
        </div>
    </div>
    <div class="container">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon blue">ðŸ‘¥</div>
                </div>
                <div class="stat-value" id="totalUsers">0</div>
                <div class="stat-label">Total Users</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon green">âœ…</div>
                </div>
                <div class="stat-value" id="activeUsers">0</div>
                <div class="stat-label">Active Users</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon red">ðŸš«</div>
                </div>
                <div class="stat-value" id="bannedUsers">0</div>
                <div class="stat-label">Banned Users</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon yellow">ðŸ”‘</div>
                </div>
                <div class="stat-value" id="totalLogins">0</div>
                <div class="stat-label">Total Logins</div>
            </div>
        </div>
        <div class="content-card">
            <div class="card-header">
                <div class="card-title">User Management</div>
                <div class="tabs">
                    <button class="tab active" onclick="showTab('users')">All Users</button>
                    <button class="tab" onclick="showTab('banned')">Banned Users</button>
                </div>
                <input type="text" class="search-box" placeholder="Search users..." onkeyup="searchUsers(this.value)">
            </div>
            <div id="users-tab">
                <div class="table-container">
                    <table>
                        <thead><tr><th>Discord ID</th><th>Username</th><th>Email</th><th>Total Logins</th><th>Last Login</th><th>Actions</th></tr></thead>
                        <tbody id="users-list"><tr><td colspan="6" class="loading"><div class="spinner"></div>Loading users...</td></tr></tbody>
                    </table>
                </div>
            </div>
            <div id="banned-tab">
                <div class="table-container">
                    <table>
                        <thead><tr><th>Discord ID</th><th>Reason</th><th>Banned At</th><th>Actions</th></tr></thead>
                        <tbody id="banned-list"><tr><td colspan="4" class="loading"><div class="spinner"></div>Loading banned users...</td></tr></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="banModal">
        <div class="modal-content">
            <div class="modal-title">Ban User</div>
            <form onsubmit="banUser(event)">
                <input type="hidden" id="banUserId">
                <div class="form-group"><label class="form-label">Reason</label><input type="text" class="form-control" id="banReason" placeholder="Enter ban reason" required></div>
                <div class="modal-actions"><button type="button" class="btn" style="background: rgba(255,255,255,0.1);" onclick="closeModal()">Cancel</button><button type="submit" class="btn btn-danger">Ban User</button></div>
            </form>
        </div>
    </div>
    <script>
        function toggleDropdown() { document.getElementById('dropdownMenu').classList.toggle('active'); }
        document.addEventListener('click', function(event) { const dropdown = document.querySelector('.logo-dropdown'); if (!dropdown.contains(event.target)) document.getElementById('dropdownMenu').classList.remove('active'); });
        async function loadStats() { const res = await fetch('/api/panel/stats'); const data = await res.json(); document.getElementById('totalUsers').textContent = data.total_users; document.getElementById('activeUsers').textContent = data.active_users; document.getElementById('bannedUsers').textContent = data.banned_users; document.getElementById('totalLogins').textContent = data.total_logins; }
        async function loadUsers() { const res = await fetch('/api/panel/users'); const data = await res.json(); const list = document.getElementById('users-list'); list.innerHTML = ''; if (Object.keys(data.users).length === 0) { list.innerHTML = '<tr><td colspan="6" style="text-align:center;padding:40px;color:rgba(255,255,255,0.5);">No users found</td></tr>'; return; } for (const [id, user] of Object.entries(data.users)) { const lastLogin = user.last_login ? new Date(user.last_login).toLocaleString() : 'Never'; list.innerHTML += `<tr><td>${id}</td><td>${user.username}</td><td>${user.email || 'N/A'}</td><td>${user.total_logins || 0}</td><td>${lastLogin}</td><td><button class="btn btn-danger" onclick="openBanModal('${id}')">Ban</button></td></tr>`; } }
        async function loadBanned() { const res = await fetch('/api/panel/banned'); const data = await res.json(); const list = document.getElementById('banned-list'); list.innerHTML = ''; if (Object.keys(data.banned).length === 0) { list.innerHTML = '<tr><td colspan="4" style="text-align:center;padding:40px;color:rgba(255,255,255,0.5);">No banned users</td></tr>'; return; } for (const [id, ban] of Object.entries(data.banned)) { const bannedAt = new Date(ban.banned_at).toLocaleString(); list.innerHTML += `<tr><td>${id}</td><td>${ban.reason}</td><td>${bannedAt}<br><small style="color:rgba(255,255,255,0.5);">by ${ban.banned_by || 'Admin'}</small></td><td><button class="btn btn-success" onclick="unbanUser('${id}')">Unban</button></td></tr>`; } }
        function showTab(tab) { document.querySelectorAll('.tab').forEach(t => t.classList.remove('active')); event.target.classList.add('active'); document.getElementById('users-tab').style.display = tab === 'users' ? 'block' : 'none'; document.getElementById('banned-tab').style.display = tab === 'banned' ? 'block' : 'none'; if (tab === 'banned') loadBanned(); }
        function openBanModal(userId) { document.getElementById('banUserId').value = userId; document.getElementById('banModal').classList.add('active'); }
        function closeModal() { document.getElementById('banModal').classList.remove('active'); }
        async function banUser(event) { event.preventDefault(); const userId = document.getElementById('banUserId').value; const reason = document.getElementById('banReason').value; await fetch('/api/panel/ban', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({user_id: userId, reason: reason}) }); closeModal(); loadUsers(); loadStats(); alert('âœ… User banned successfully!'); }
        async function unbanUser(userId) { if (!confirm('Unban this user?')) return; await fetch('/api/panel/unban', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({user_id: userId}) }); loadBanned(); loadUsers(); loadStats(); alert('âœ… User unbanned successfully!'); }
        function searchUsers(query) { const rows = document.querySelectorAll('#users-list tr'); rows.forEach(row => { const text = row.textContent.toLowerCase(); row.style.display = text.includes(query.toLowerCase()) ? '' : 'none'; }); }
        loadStats(); loadUsers();
    </script>
</body>
</html>
